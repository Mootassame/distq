!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"7wo0":function(t,i,a){"use strict";a.r(i),a.d(i,"SettingsModule",(function(){return ne}));var c=a("tyNb"),s=a("mrSG"),u=a("Vbab"),l=a("b1TM"),d=a("+dX3"),f=a("dCvk"),m=a("nV0w"),p=a("3arV"),g=["amber","blue","cyan","deep_orange","deep_purple","green","indigo","light_blue","light_green","lime","orange","pink","purple","red","teal","yellow","grey","blue_grey","brown"].map((function(e){return{id:e,label:Object(u.d)("settings.colors."+e)}})),b=["amber","blue","cyan","deep_orange","deep_purple","green","indigo","light_blue","light_green","lime","orange","pink","purple","red","teal","yellow"].map((function(e){return{id:e,label:Object(u.d)("settings.colors."+e)}}));function v(e){return Object(u.d)("settings.fields."+e)}var y={primaryColor:new d.a("primaryColor",v("primaryColor"),g),secondaryColor:new d.a("secondaryColor",v("secondaryColor"),b),backgroundImages:new p.a("backgroundImages",v("backgroundImages"),m.a.values.settingsBackgroundImages,{max:1}),logos:new p.a("logos",v("logos"),m.a.values.settingsLogos,{max:1})},h=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(a,t);var i=o(a);function a(){return e(this,a),i.apply(this,arguments)}return n(a,null,[{key:"fields",get:function(){return y}}]),a}(f.a),w=a("rXYk"),k=a("fXoL"),C=a("3Pt+"),I=a("APW9"),O=a("UDmo"),N=a("6SvT"),S=a("ofXK"),x=a("bTqV"),M=a("NFeN"),j=function(){return["/audit-log"]},L=function(){return{entityNames:"settings"}};function P(e,t){1&e&&(k.Nc(0,"button",2),k.Ic(1,"mat-icon",3),k.xd(2,"\xa0 "),k.Ic(3,"app-i18n",4),k.Mc()),2&e&&k.dd("routerLink",k.fd(2,j))("queryParams",k.fd(3,L))}var _,F=((_=function(){function t(n){e(this,t),this.auditLogService=n}return n(t,[{key:"hasPermissionToAuditLogs",get:function(){return this.auditLogService.hasPermissionToRead}}]),t}()).\u0275fac=function(e){return new(e||_)(k.Hc(N.a))},_.\u0275cmp=k.Bc({type:_,selectors:[["app-settings-toolbar"]],decls:2,vars:1,consts:[[1,"app-page-toolbar"],["mat-flat-button","","color","primary",3,"routerLink","queryParams",4,"ngIf"],["mat-flat-button","","color","primary",3,"routerLink","queryParams"],["inline","","fontSet","fas","fontIcon","fa-history"],["key","auditLog.menu"]],template:function(e,t){1&e&&(k.Nc(0,"div",0),k.wd(1,P,4,4,"button",1),k.Mc()),2&e&&(k.wc(1),k.dd("ngIf",t.hasPermissionToAuditLogs))},directives:[S.k,x.b,c.c,M.a,O.a],encapsulation:2}),_),R=a("Xa2L"),X=a("kmnG"),q=a("d3UM"),T=a("YPoJ"),G=a("FKr1");function B(e,t){1&e&&(k.Nc(0,"div",6),k.Ic(1,"mat-spinner",7),k.Mc())}function E(e,t){if(1&e&&(k.Nc(0,"mat-option",26),k.Nc(1,"div",27),k.Ic(2,"div",28),k.xd(3),k.Mc(),k.Mc()),2&e){var n=t.$implicit,r=k.Xc(2);k.dd("value",n.id),k.wc(2),k.dd("ngClass",r.classForColor(n.id)),k.wc(1),k.zd(" ",n.label," ")}}function A(e,t){if(1&e&&(k.Nc(0,"mat-option",26),k.Nc(1,"div",27),k.Ic(2,"div",28),k.xd(3),k.Mc(),k.Mc()),2&e){var n=t.$implicit,r=k.Xc(2);k.dd("value",n.id),k.wc(2),k.dd("ngClass",r.classForColor(n.id)),k.wc(1),k.zd(" ",n.label," ")}}var D=function(){return["/"]};function V(e,t){if(1&e){var n=k.Oc();k.Nc(0,"form",8,9),k.Tc("ngSubmit",(function(){return k.nd(n),k.Xc().doSave()})),k.Nc(2,"mat-form-field",10),k.Nc(3,"span",11),k.Nc(4,"div",12),k.xd(5," \xa0 "),k.Mc(),k.Mc(),k.Nc(6,"mat-select",13),k.wd(7,E,4,3,"mat-option",14),k.Mc(),k.Mc(),k.Nc(8,"mat-form-field",10),k.Nc(9,"span",11),k.Nc(10,"div",12),k.xd(11," \xa0 "),k.Mc(),k.Mc(),k.Nc(12,"mat-select",13),k.wd(13,A,4,3,"mat-option",14),k.Mc(),k.Mc(),k.Ic(14,"app-image-form-field",15),k.Ic(15,"app-image-form-field",15),k.Nc(16,"div",16),k.Nc(17,"button",17),k.Ic(18,"mat-icon",18),k.xd(19,"\xa0 "),k.Ic(20,"app-i18n",19),k.Mc(),k.Nc(21,"button",20),k.Tc("click",(function(){return k.nd(n),k.Xc().doReset()})),k.Ic(22,"mat-icon",21),k.xd(23,"\xa0 "),k.Ic(24,"app-i18n",22),k.Mc(),k.Nc(25,"button",23),k.Ic(26,"mat-icon",24),k.xd(27,"\xa0 "),k.Ic(28,"app-i18n",25),k.Mc(),k.Mc(),k.Mc()}if(2&e){var r=k.ld(1),o=k.Xc();k.dd("formGroup",o.form),k.wc(4),k.dd("ngClass",o.classForColor(o.form.value.primaryColor)),k.wc(2),k.dd("placeholder",o.fields.primaryColor.label)("formControlName",o.fields.primaryColor.name),k.wc(1),k.dd("ngForOf",o.primaryColorOptions),k.wc(3),k.dd("ngClass",o.classForColor(o.form.value.secondaryColor)),k.wc(2),k.dd("placeholder",o.fields.secondaryColor.label)("formControlName",o.fields.secondaryColor.name),k.wc(1),k.dd("ngForOf",o.secondaryColorOptions),k.wc(1),k.dd("formControl",o.form.get(o.fields.logos.name))("label",o.fields.logos.label)("storage",o.fields.logos.storage)("required",o.fields.logos.required)("max",o.fields.logos.max)("submitted",r.submitted),k.wc(1),k.dd("formControl",o.form.get(o.fields.backgroundImages.name))("label",o.fields.backgroundImages.label)("storage",o.fields.backgroundImages.storage)("required",o.fields.backgroundImages.required)("max",o.fields.backgroundImages.max)("submitted",r.submitted),k.wc(2),k.dd("disabled",o.saveLoading),k.wc(4),k.dd("disabled",o.saveLoading),k.wc(4),k.dd("disabled",o.saveLoading)("routerLink",k.fd(25,D))}}var Y,z,H,J=((Y=function(){function t(n,r){e(this,t),this.settingsService=n,this.formBuilder=r,this.breadcrumb=[[Object(u.d)("dashboard.menu")],[Object(u.d)("settings.title")]]}return n(t,[{key:"ngOnInit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.settingsService.doInit();case 2:this.buildSchema(),this.doReset();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"doSave",value:function(){if(this.form.valid)return this.settingsService.doSave(Object.assign(Object.assign({},this.form.value),{theme:"".concat(this.form.value.primaryColor,"-").concat(this.form.value.secondaryColor)}))}},{key:"doReset",value:function(){var e=this.settingsService.settings.theme;this.form=this.schema.buildForm(e&&"default"!==e?Object.assign(Object.assign({},this.settingsService.settings),{primaryColor:e.split("-")[0],secondaryColor:e.split("-")[1]}):Object.assign(Object.assign({},this.settingsService.settings||{}),{primaryColor:"light_blue",secondaryColor:"pink"}))}},{key:"classForColor",value:function(e){return r=!0,(n=e)in(t={"settings-box":!0})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t;var t,n,r}},{key:"buildSchema",value:function(){this.schema=new w.a([this.fields.primaryColor,this.fields.secondaryColor,this.fields.logos,this.fields.backgroundImages],this.formBuilder)}},{key:"fields",get:function(){return h.fields}},{key:"initLoading",get:function(){return this.settingsService.initLoading}},{key:"saveLoading",get:function(){return this.settingsService.saveLoading}},{key:"primaryColorOptions",get:function(){var e=this;return this.fields.primaryColor.options.filter((function(t){return t.id!==e.form.value.secondaryColor}))}},{key:"secondaryColorOptions",get:function(){var e=this;return this.fields.secondaryColor.options.filter((function(t){return t.id!==e.form.value.primaryColor}))}}]),t}()).\u0275fac=function(e){return new(e||Y)(k.Hc(l.a),k.Hc(C.d))},Y.\u0275cmp=k.Bc({type:Y,selectors:[["app-settings"]],decls:7,vars:3,consts:[[3,"items"],[1,"app-content-page"],[1,"app-content-title"],["key","settings.title"],["class","app-page-spinner",4,"ngIf"],["class","form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"app-page-spinner"],["color","accent"],[1,"form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],["appearance","outline"],["matPrefix",""],[2,"margin-right","16px",3,"ngClass"],[3,"placeholder","formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"formControl","label","storage","required","max","submitted"],[1,"form-buttons"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["inline","","fontSet","far","fontIcon","fa-save"],["key","common.save"],["mat-flat-button","","color","accent","type","button",3,"disabled","click"],["inline","","fontSet","fas","fontIcon","fa-undo"],["key","common.reset"],["mat-flat-button","","color","warn","type","button",3,"disabled","routerLink"],["inline","","fontSet","fas","fontIcon","fa-times"],["key","common.cancel"],[3,"value"],[1,"settings-option-wrapper"],[2,"margin-right","8px",3,"ngClass"]],template:function(e,t){1&e&&(k.Ic(0,"app-breadcrumb",0),k.Nc(1,"div",1),k.Nc(2,"h1",2),k.Ic(3,"app-i18n",3),k.Mc(),k.Ic(4,"app-settings-toolbar"),k.wd(5,B,2,0,"div",4),k.wd(6,V,29,26,"form",5),k.Mc()),2&e&&(k.dd("items",t.breadcrumb),k.wc(5),k.dd("ngIf",t.initLoading),k.wc(1),k.dd("ngIf",!t.initLoading))},directives:[I.a,O.a,F,S.k,R.b,C.s,C.n,C.h,X.c,X.g,S.i,q.a,C.m,C.g,S.j,T.a,C.f,C.q,x.b,M.a,c.c,G.o],encapsulation:2}),Y),K=a("P+IX"),U=a("uswQ"),$=a("ogYm"),Q=a("mmyZ"),W=[{path:"",component:U.a,children:[{path:"",component:J,canActivate:[K.a,$.a],data:{permission:Q.a.values.settingsEdit}}]}],Z=((z=function t(){e(this,t)}).\u0275mod=k.Fc({type:z}),z.\u0275inj=k.Ec({factory:function(e){return new(e||z)},providers:[],imports:[[c.f.forChild(W)],c.f]}),z),ee=a("PCNd"),te=a("Tx//"),ne=((H=function t(){e(this,t)}).\u0275mod=k.Fc({type:H}),H.\u0275inj=k.Ec({factory:function(e){return new(e||H)},providers:[],imports:[[ee.a,Z,te.a]]}),H)},ogYm:function(t,r,o){"use strict";o.d(r,"a",(function(){return u}));var i=o("mrSG"),a=o("qXBG"),c=o("fXoL"),s=o("tyNb"),u=function(){var t=function(){function t(n,r){e(this,t),this.authService=n,this.router=r}return n(t,[{key:"canActivate",value:function(e,t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authService.initialized;case 2:return t.abrupt("return",e.data.permission&&!!this.authService.hasPermission(e.data.permission)||(this.router.navigate([""]),!1));case 3:case"end":return t.stop()}}),t,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Rc(a.a),c.Rc(s.b))},t.\u0275prov=c.Dc({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();